# Cookie

# Session

#### Cookie和Session区别

1）cookie保存在客户端，session保存在服务器端；

2）cookie可以跟踪会话，也可以保存用户喜好或者保存用户名密码；session用来跟踪会话。

3）cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session。

4）session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie。

#### 服务端session是如何标识已登录的用户的？

http是无状态的会话，需要基于http协议支持会话状态的机制。这时候引入session，在会话开始时，分配一个唯一的会话标识（sessionId），通过cookie把这个标识告诉浏览器，以后每次请求的时候，浏览器的cookie都会带上这个会话ID来告诉web服务器请求是属于哪个会话的。这也是为什么禁用了cookie之后，每次操作都需要先登录。在web服务器上各个会话有独立的存储，保存不同会话的信息。

**对于上万个用于已经登录了，服务端是怎么分辨每个用户的？**

1. 服务器在响应头内加上”set-Cookie:XXXXXXXXXXXXX“\(相当于一个唯一的ID符\)，此信息是服务器随机生成的，放在服务器内存里，不会重复,这就是sessionid。
2. 当浏览器得到这个sessionId会将它放在自己的进程内存里,.然后你继续发请求给这个网站的时候,浏览器就会把这个sessionId放在请求头里发送给该服务器了,这样服务器得到sessionId后再和自己内存里存放的sessionid对比锁定客户端,从而区分不同客户端,完成会话。
3. 关闭浏览器结束进程,则这个sessionid将消失,如果用户又打开浏览器想继续这次会话的时候,就会因为发送的请求中没有这个sessionid，而使服务器无法辨别请求身份。



