# .JAVA文件执行过程

1. 源代码文件（.java文件） 被JAVA编译器 编译为字节码文件（.class文件）。
   class文件包括：结构信息、元数据、方法信息
2. 由JVM中的类加载器加载各个类的字节码文件。

   加载 验证 准备 解析 初始化。 四种类加载器 自上而下加载。

3. 由JVM执行引擎执行。

   JVM是基于栈的体系结构来执行class字节码的。线程创建后，都会产生程序计数器（PC）和栈（Stack），程序计数器存放下一条要执行的指令在方法内的偏移量，栈中存放一个个栈帧，每个栈帧对应着每个方法的每次调用，而栈帧又是有局部变量区和操作数栈两部分组成，局部变量区用于存放方法中的局部变量和参数，操作数栈中用于存放方法执行过程中产生的中间结果。

首先Java源代码文件\(.java后缀\)会被Java编译器编译为字节码文件\(.class后缀\)，然后由JVM中的类加载器加载各个类的字节码文件，加载完毕之后，交由JVM执行引擎执行。在整个程序执行过程中，JVM会用一段空间来存储程序执行期间需要用到的数据和相关信息，这段空间一般被称作为Runtime Data Area\(运行时数据区\)，也就是我们常说的JVM内存。

因此，在Java中我们常常说到的内存管理就是针对这段空间进行管理（如何分配和回收内存空间）。

![](/assets/300854081661499.jpg)

#### 代码执行顺序

1. 多个静态成员变量, 静态代码块按顺序执行

2. 单个类中: 静态代码 -&gt;main方法 -&gt;构造块 -&gt;构造方法

3. 构造块在每一次创建对象时执行

4. 涉及父类和子类的初始化过程  
   1. 初始化父类中的静态成员变量和静态代码块  
   2. 初始化子类中的静态成员变量和静态代码块  
   3. 初始化父类的普通成员变量和构造代码块\(按次序\)，再执行父类的构造方法\(注意父类构造方法中的子类方法覆盖\)  
   4. 初始化子类的普通成员变量和构造代码块\(按次序\)，再执行子类的构造方法



